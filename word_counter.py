import requests
from bs4 import BeautifulSoup
import re

PAGE_URL = input("Enter the target:port ")


def get_html_of(url):
    resp = requests.get(url) # httpbin.org/ip prints our public ip addr

    if resp.status_code != 200:
        print(f'HTML status code is {resp.status_code}, was expecting 200. Exiting...')
        exit(1)

    return resp.content.decode() # the resp content will be in byte-string hence decode()

html = get_html_of(PAGE_URL)
soup = BeautifulSoup(html, 'html.parser')
raw_text = soup.get_text()
all_words = re.findall(r'\w+', raw_text)

word_count = {} # {} is dictionary

for word in all_words: # iterate through all_words and find repetitive words
    if word not in word_count: # if word is not in word_count add it to the dictionary and increment the counter by 1
        word_count[word] = 1
    else: 
        current_count = word_count.get(word)
        word_count[word] = current_count + 1

sorted_words = sorted(word_count.items(), key=lambda item:item[1], reverse=True) # sort through the words

for i in range(10):
    print(sorted_words[i][0]) # print words that occur more than 10 times